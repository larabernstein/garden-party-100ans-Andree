<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üéâ Garden Party 100 ans Andr√©e üéâ</title>

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --card:rgba(255,255,255,.08);
  --line:rgba(255,255,255,.14);
  --txt:rgba(255,255,255,.94);
  --muted:rgba(255,255,255,.72);
  --accent:#fde68a;
  --accent2:#bbf7d0;

  --vh: 1vh;          /* corrig√© par JS */
  --card-scale: 1;    /* ajust√© par JS */
}

*{box-sizing:border-box;margin:0;padding:0;}

html{
  background:#08140f;
  height:100%;
  overflow:hidden;
  overscroll-behavior:none;
}

body{
  height: calc(var(--vh) * 100);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  font-family:'Cormorant Garamond', serif;
  color:white;
  position:relative;
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
}

/* ===== FOND FLOU ===== */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:url("assets/BG.jpg") center/cover no-repeat;
  filter:blur(2px) brightness(.75);
  transform:scale(1.05);
  z-index:-2;
}

body::after{
  content:"";
  position:fixed;
  inset:0;
  background:linear-gradient(to bottom, rgba(0,0,0,.55), rgba(0,0,0,.35));
  z-index:-1;
}

/* ===== MARQUEE ===== */
.marquee{
  position:relative;
  overflow:hidden;
  flex:0 0 auto;
  background:rgba(255,255,255,.03);
  border-bottom:1px solid rgba(255,255,255,.1);
}

.marquee.bottom{
  border-top:1px solid rgba(255,255,255,.1);
  border-bottom:none;
}

/* Quand c'est en pause, on autorise le swipe horizontal */
.marquee.paused{
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; /* Firefox */
}
.marquee.paused::-webkit-scrollbar{ display:none; }

.marquee.paused .track{
  animation-play-state: paused;
}

.track{
  display:flex;
  gap:12px;
  padding:10px;
  width:max-content;
  animation:scroll 110s linear infinite;
  will-change:transform;
  transform: translateZ(0);
}

.marquee.reverse .track{
  animation-direction:reverse;
}

@keyframes scroll{
  from{transform:translateX(0) translateZ(0);}
  to{transform:translateX(-50%) translateZ(0);}
}

.photo{
  height:clamp(55px,10vh,100px);
  border-radius:14px;
  object-fit:cover;
  border:1px solid rgba(255,255,255,.15);
  user-select:none;
  -webkit-user-drag:none;
}

/* ===== CENTRE ===== */
.main{
  flex:1;
  min-height:0;
  display:grid;
  place-items:center;
  padding:clamp(8px,2vh,16px);
}

.card{
  width:min(720px,100%);
  background:var(--card);
  border:1px solid var(--line);
  border-radius:24px;
  padding:clamp(14px,2vh,22px);
  backdrop-filter:blur(8px);
  text-align:center;
  box-shadow:0 20px 60px rgba(0,0,0,.4);

  transform: scale(var(--card-scale));
  transform-origin:center;
}

.card.is-scroll{
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  max-height:100%;
}

.badge{
  display:inline-flex;
  gap:8px;
  padding:6px 12px;
  border-radius:999px;
  background:rgba(0,0,0,.2);
  font-family:system-ui;
  font-size:13px;
  margin-bottom:10px;
}

h1{
  font-size:clamp(28px,6vw,42px);
  line-height:1.1;
  margin-bottom:8px;
}

h1 span{font-weight:700;}

.sub{
  font-family:system-ui;
  font-size:14px;
  color:var(--muted);
  margin-bottom:14px;
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  font-family:system-ui;
}

.info{
  padding:10px;
  border-radius:14px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  text-align:left;
}

.info b{
  display:block;
  font-size:12px;
  color:var(--muted);
  margin-bottom:4px;
}

.actions{
  margin-top:14px;
}

a.btn{
  padding:10px 14px;
  border-radius:12px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#111;
  font-weight:700;
  text-decoration:none;
  font-family:system-ui;
}

/* Mobile: grille 1 colonne */
@media(max-width:600px){
  .grid{grid-template-columns:1fr;}
}

/* Compact mode: petits √©crans */
@media (max-height: 740px){
  .photo{ height: clamp(46px, 8vh, 86px); }
  .track{ padding: 8px; gap: 10px; animation-duration: 130s; }
  .card{ padding: 14px; border-radius: 20px; }
  h1{ font-size: clamp(24px, 5.5vw, 36px); margin-bottom: 6px; }
  .sub{ font-size: 13px; margin-bottom: 10px; }
  .grid{ gap: 8px; }
  .info{ padding: 9px 10px; }
  .actions{ margin-top: 10px; }
  a.btn{ padding: 9px 12px; border-radius: 11px; }
}

@media (max-height: 700px){
  .badge{ display:none; }
}

/* ===== Lightbox plein √©cran ===== */
.lightbox{
  position: fixed;
  inset: 0;
  display: none;
  place-items: center;
  background: rgba(0,0,0,.78);
  backdrop-filter: blur(6px);
  z-index: 9999;
  padding: 18px;
}

.lightbox.open{
  display: grid;
}

.lb-img{
  max-width: min(96vw, 900px);
  max-height: 86vh;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.18);
  box-shadow: 0 24px 80px rgba(0,0,0,.6);
  object-fit: contain;
  background: rgba(255,255,255,.06);
}

.lb-close{
  position: absolute;
  top: max(12px, env(safe-area-inset-top));
  right: max(12px, env(safe-area-inset-right));
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.22);
  background: rgba(0,0,0,.45);
  color: white;
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
}

.lb-hint{
  position: absolute;
  bottom: max(12px, env(safe-area-inset-bottom));
  color: rgba(255,255,255,.75);
  font-family: system-ui;
  font-size: 13px;
}
</style>
</head>

<body>

<section class="marquee top" aria-label="Photos d'Andr√©e jeune">
  <div class="track" id="trackYoung"></div>
</section>

<main class="main">
  <div class="card" id="card">
    <div class="badge">üéÇ Invitation ‚Ä¢ 100 ans Andr√©e</div>

    <h1>
      ‚ú®üéÇ Andr√©e f√™te<br>
      <span>ses 100 ans</span> üéÇ‚ú®
    </h1>

    <p class="sub">Venez c√©l√©brer avec nous son anniversaire</p>

    <div class="grid">
      <div class="info"><b>üìÖ DATE</b>Samedi 13 Juin 2026</div>
      <div class="info"><b>üïí HEURE</b>12h00</div>
      <div class="info"><b>üìç LIEU</b>Ora FarmHouse - 63 Rue Manin, Paris</div>
      <div class="info"><b>üåø INFOS</b>Votre pr√©sence sera le plus beau des cadeaux</div>
      <div class="info"><b>üéâ RSVP</b>Merci d‚Äôindiquer le nombre de personnes</div>
    </div>

    <div class="actions">
      <a class="btn" target="_blank" rel="noreferrer"
         href="https://www.google.com/maps">Itin√©raire</a>
    </div>
  </div>
</main>

<section class="marquee bottom reverse" aria-label="Photos d'Andr√©e aujourd'hui">
  <div class="track" id="trackNow"></div>
</section>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox" aria-hidden="true">
  <button class="lb-close" id="lbClose" aria-label="Fermer">‚úï</button>
  <img class="lb-img" id="lbImg" alt="">
  <div class="lb-hint">Touchez ‚úï ou le fond pour fermer</div>
</div>

<script>
/* ---------- PHOTOS (1 seule liste, pas de doublons) ---------- */
const youngPhotos=[
  "assets/old_01.png",
  "assets/old_02.png",
  "assets/old_03.png",
  "assets/old_04.png",
  "assets/old_05.png",
  "assets/old_06.png",
  "assets/old_07.png",
   "assets/old_01.png",
  "assets/old_02.png",
  "assets/old_03.png",
  "assets/old_04.png",
  "assets/old_05.png",
  "assets/old_06.png",
  "assets/old_07.png",
   "assets/old_01.png",
  "assets/old_02.png",
  "assets/old_03.png",
  "assets/old_04.png",
  "assets/old_05.png",
  "assets/old_06.png",
  "assets/old_07.png"
];

const nowPhotos=[
  "assets/new01.jpg",
  "assets/new02.jpg",
  "assets/new03.jpg",
  "assets/new04.jpg",
  "assets/new05.jpg",
  "assets/new06.jpg",
  "assets/new07.jpg",
  "assets/new08.jpg",
  "assets/new10.jpg",
  "assets/new11.jpg",
  "assets/new01.jpg",
  "assets/new02.jpg",
  "assets/new03.jpg",
  "assets/new04.jpg",
  "assets/new05.jpg",
  "assets/new06.jpg",
  "assets/new07.jpg",
  "assets/new08.jpg",
  "assets/new10.jpg",
  "assets/new11.jpg",
  "assets/new01.jpg",
  "assets/new02.jpg",
  "assets/new03.jpg",
  "assets/new04.jpg",
  "assets/new05.jpg",
  "assets/new06.jpg",
  "assets/new07.jpg",
  "assets/new08.jpg",
  "assets/new10.jpg",
  "assets/new11.jpg"


];

/* ---------- MARQUEE: r√©p√®te assez pour remplir + duplique x2 pour -50% ---------- */
function buildMarquee(trackEl, photos){
  trackEl.innerHTML = "";
  const repeats = Math.max(6, Math.ceil(window.innerWidth / 260)); // densit√© auto
  const list = [];
  for(let i=0;i<repeats;i++) list.push(...photos);

  const all = [...list, ...list]; // 2 groupes identiques
  for(const src of all){
    const img=document.createElement("img");
    img.className="photo";
    img.src=src;
    img.alt="";
    trackEl.appendChild(img);
  }
}

/* ---------- VIEWPORT stable + auto-fit card ---------- */
(function(){
  const root = document.documentElement;
  const main = document.querySelector('.main');
  const card = document.getElementById('card');

  function setVH(){
    root.style.setProperty('--vh', (window.innerHeight * 0.01) + 'px');
  }

  function fitCard(){
    if(!main || !card) return;

    card.classList.remove('is-scroll');
    root.style.setProperty('--card-scale', 1);

    const available = main.getBoundingClientRect().height - 10;
    const needed = card.getBoundingClientRect().height;

    if (needed <= available) return;

    const minScale = 0.86;
    const scale = Math.max(minScale, available / needed);
    root.style.setProperty('--card-scale', scale);

    requestAnimationFrame(() => {
      const after = card.getBoundingClientRect().height;
      if (after > available) card.classList.add('is-scroll');
    });
  }

  function refresh(){
    setVH();
    buildMarquee(document.getElementById("trackYoung"), youngPhotos);
    buildMarquee(document.getElementById("trackNow"), nowPhotos);
    fitCard();
  }

  window.addEventListener('load', refresh);
  window.addEventListener('resize', () => {
    clearTimeout(window.__r);
    window.__r = setTimeout(refresh, 120);
  });
  window.addEventListener('orientationchange', () => setTimeout(refresh, 200));
})();

/* ---------- Pause au tap (sauf si tap sur photo) ---------- */
function enableInteractiveMarquee(marqueeEl){
  const track = marqueeEl.querySelector('.track');
  let paused = false;

  marqueeEl.addEventListener('click', (e) => {
    // Si on clique sur une photo, on ne toggle pas pause
    if (e.target.closest('img.photo')) return;

    paused = !paused;
    marqueeEl.classList.toggle('paused', paused);
    track.style.animationPlayState = paused ? 'paused' : 'running';

    if(!paused){
      marqueeEl.scrollLeft = 0;
    }
  });
}

enableInteractiveMarquee(document.querySelector('.marquee.top'));
enableInteractiveMarquee(document.querySelector('.marquee.bottom'));

/* ---------- Lightbox: tap photo => plein √©cran ---------- */
(function enableLightbox(){
  const lightbox = document.getElementById('lightbox');
  const lbImg = document.getElementById('lbImg');
  const lbClose = document.getElementById('lbClose');

  function open(src){
    lbImg.src = src;
    lightbox.classList.add('open');
    lightbox.setAttribute('aria-hidden', 'false');
  }

  function close(){
    lightbox.classList.remove('open');
    lightbox.setAttribute('aria-hidden', 'true');
    lbImg.src = "";
  }

  document.addEventListener('click', (e) => {
    const img = e.target.closest('img.photo');
    if(!img) return;
    open(img.src);
  });

  lbClose.addEventListener('click', close);
  lightbox.addEventListener('click', (e) => {
    if(e.target === lightbox) close();
  });

  document.addEventListener('keydown', (e) => {
    if(e.key === 'Escape') close();
  });
})();
</script>

</body>
</html>